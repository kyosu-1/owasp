---
marp: true
footer: "2023/03/20"

---

# 4. セキュリティの誤設定

# A05. security misconfiguration

---

# 今回やること

* セキュリティの誤設定(security misconfiguration)とは
* 想定される被害
* OWASP juice shopによる実践
* 解決策

---

# セキュリティの誤設定(security misconfiguration)とは

* セキュリティの誤設定(security misconfiguration)とはアプリケーションやシステムのセキュリティ設定が、デフォルトまたはカスタム設定によって不適切に設定されている状況を指す
* これにより、意図しない機密情報の漏洩、リソースへの不正アクセス、その他の脆弱性が発生する可能性がある
* 攻撃のリスクを軽減するためには、セキュリティ設定のベストプラクティスに従うことが不可欠

[参考: owasp top 10](https://owasp.org/Top10/A05_2021-Security_Misconfiguration/)

---

# 簡単な例

ウェブアプリケーションには、パブリックにアクセス可能な管理インターフェースがあり、デフォルトの資格情報（例えば、「admin」と「password」）が設定されていることがある。このとき開発者がこれの設定を変更しないことで、攻撃者はこれらの資格情報を簡単に推測して、管理インターフェースにアクセスでき、アプリケーションを変更したり、機密情報にアクセスしたりすることが可能になる。

---

# 想定される被害

セキュリティの誤った設定によって生じる可能性のある脆弱性と被害には、以下のようなものがあります。

1. 不正なアクセス：攻撃者は、誤ったセキュリティ設定を悪用して、制限されたリソースにアクセスしたり、データを変更したり、特権のあるアクションを実行したりすることができる。
2. 情報漏洩：不適切な設定（例えば、詳細なエラーメッセージ）により、攻撃者に機密情報が漏洩し、さらなる攻撃を助長することがある。
3. システムの危険：攻撃者は、誤った設定を悪用してアプリケーションや基盤システムを危険にさらすことができ、これにより追加のセキュリティ脆弱性やシステムの完全な支配が可能になることがある。

---

# OWASP juice shopによる実践

以下の脆弱性を実践

* Error Handling
* Deprecated Interface
* Cross-Site Imaging
* Login Support Team

---

# Error Handling

---

# 一般的な解決策

セキュリティの誤設定(security misconfiguration)の一般的な解決策としては以下の6つが主に挙げられる。

1. デフォルトで安全
2. 定期的に設定を見直し、更新する
3. 不要な機能を制限する
4. 最小権限の原則を適用する
5. セキュリティチェックリストと堅牢化ガイドを使用する
6. 自動化された設定管理

---

# 解決策1. デフォルトで安全(Secure by default)
* 「デフォルトで安全(secure by default)」とは、アプリケーションやシステムが、最も安全な設定をそのまま有効にすることを意味する。
* デフォルトの設定では、不要なサービスや機能が露出しないようにする必要がある。例えば、データベースを新規にインストールする場合、「admin」や「password」のような一般的な認証情報ではなく、強力でユニークなデフォルト認証情報を設定する必要がある。
* これにより、攻撃者はデフォルトの設定を簡単に悪用して不正アクセスを行うことができなくなる。


---

# 解決策2. 定期的に設定を見直し、更新する

* セキュリティの維持には設定が最新のベストプラクティスに従っていることを確認することが不可欠。
* セキュリティ設定を定期的に見直し、更新することで、潜在的な脆弱性を特定し、修正することができ、システムの安全性を確保することができる。
* 例えば、Webサーバーの設定を定期的に見直し、非推奨のプロトコル（TLS 1.0など）を無効にし、安全なプロトコルのみを有効にしておく必要がある。([参考 TLS](https://college.globalsign.com/ssl-pki-info/tls_ssl_brittle/))

---

# 解決策3. 不要な機能を制限する

* 不要な機能、サービス、コンポーネントを無効化または削除することで、攻撃者が脆弱性を悪用する機会を制限することができる。
* 例えば、FTP(ファイル転送のプロトコル)アクセスを必要としないWebアプリケーションでは、FTPサービスを無効にすることで、そのチャネルを介した潜在的な攻撃を防ぐことができる。

---

# 解決策4. 最小特権の原則を適用する

* 最小特権の原則は、ユーザーが自分のタスクを実行するために必要な最小限のアクセス権を持つべきであるというもの。
* 最小特権の原則を実施することで、漏洩したユーザーアカウントによる潜在的な損害を最小限に抑えることができる。
* 例えば、一般社員が機密性の高い財務データや管理機能にアクセスできるようにすべきではない。ユーザーの役割に基づいてアクセスを制限することで、不正なアクセスやデータ漏洩を防ぐことができる。

---

# 解決策5. セキュリティチェックリストと堅牢化ガイドを使用する

* セキュリティチェックリストと堅牢化ガイドは、システムやアプリケーションを安全に構成するためのベストプラクティスと推奨事項を提供する。
* これらのガイドラインに従うことで、潜在的なセキュリティリスクを特定し、軽減することができる。
* 例えば、OWASP Top Ten Projectをウェブアプリケーションセキュリティのガイドとして使用することで、開発者は、一般的な脅威や脆弱性からアプリケーションを確実に保護することができるようになる。

---

# 解決策6. 自動化された設定管理

* 自動化された構成管理ツールは、異なる環境（開発、テスト、本番など）において、一貫したセキュリティ姿勢を維持するのに役立つ。
* これらのツールをバージョン管理システムとともに使用することで、構成の変更を追跡し、セキュリティ更新をより簡単に適用し、すべての環境の安全性を確保することができる。
* 例えば、Ansibleなどのツールは、サーバー、ネットワーク機器、その他のインフラストラクチャ・コンポーネントの構成を管理・自動化し、人的ミスのリスクを低減して全体的なセキュリティを向上させることができる。
  * [参考: ansible](https://proengineer.internous.co.jp/content/columnfeature/20537)
